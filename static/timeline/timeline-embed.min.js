var _tmp_script_path,embed_path;function getEmbedScriptPath(t){for(var e=document.getElementsByTagName("script"),s="",o="",i=0;i<e.length;i++)e[i].src.match(t)&&(s=e[i].src);return""!=s&&(o="/"),s.split("?")[0].split("/").slice(0,-1).join("/")+o}function createStoryJS(t,e){var s,o,i,n,c="2.24",a={timeout:"",checks:0,finished:!1,js:!1,css:!1,font:{css:!1}},r={base:embed_path,css:embed_path+"css/",js:embed_path+"js/",font:{google:!1,css:embed_path+"css/fonts/",js:"//ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"}},l={version:c,debug:!1,type:"timeline",id:"storyjs",embed_id:"timeline-embed",is_embed:!0,width:"100%",height:"100%",source:"https://docs.google.com/spreadsheet/pub?key=0Agl_Dv6iEbDadFYzRjJPUGktY0NkWXFUWkVIZDNGRHc&output=html",lang:"en",font:"default",start_at_end:!1,timenav_position:"bottom",css:r.css+"timeline.css?"+c,js:"",api_keys:{google:"",flickr:"",twitter:""},gmap_key:""};if("object"==typeof t)for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(l[i]=t[i]);function h(){40<a.checks||(a.checks++,a.js&&a.css&&a.font.css?a.finished||(a.finished=!0,function(){TL.debug=l.debug,l.ga_property_id="UA-27829802-4",l.language=l.lang,"100%"==l.width&&(l.is_full_embed=!0);window.timeline=new TL.Timeline("timeline-embed",l.source,l)}()):a.timeout=setTimeout("onloaded_check_again();",250))}void 0!==e&&(l.source=e),"object"==typeof url_config&&(l.source.match("docs.google.com")||l.source.match("json")||l.source.match("storify")||(l.source="https://docs.google.com/spreadsheet/pub?key="+l.source+"&output=html")),l.js.match("/")||(l.css=r.css+l.type+".css?"+c,l.js=r.js+l.type,l.debug?l.js+=".js?"+c:l.js+="-min.js?"+c,l.id="storyjs-"+l.type),function(){var t="tl-timeline-embed";s=document.createElement("div"),o=""!=l.embed_id?document.getElementById(l.embed_id):document.getElementById("timeline-embed");o.appendChild(s),s.setAttribute("id",l.id),l.width.toString().match("%")?o.style.width=l.width.split("%")[0]+"%":(l.width=l.width-2,o.style.width=l.width+"px");l.height.toString().match("%")?(o.style.height=l.height,t+=" tl-timeline-full-embed",o.style.height=l.height.split("%")[0]+"%"):(l.width.toString().match("%")?t+=" tl-timeline-full-embed":t+=" sized-embed",l.height=l.height-16,o.style.height=l.height+"px");o.setAttribute("class",t),o.setAttribute("className",t),s.style.position="relative"}(),LoadLib.css(l.css,function(){a.css=!0,h()}),"default"==l.font?a.font.css=!0:(l.font.match("/")?(n=l.font.split(".css")[0].split("/"),r.font.name=n[n.length-1],r.font.css=l.font):(r.font.name=l.font,r.font.css=r.font.css+"font."+l.font.toLowerCase()+".css?"+c),LoadLib.css(r.font.css,function(){a.font.css=!0,h()})),LoadLib.js(l.js,function(){a.js=!0,h()}),this.onloaded_check_again=function(){h()}}LazyLoad=function(p){var g,b,y={},i=0,_={css:[],js:[]},s=p.styleSheets;function j(t,e){var s,o=p.createElement(t);for(s in e)e.hasOwnProperty(s)&&o.setAttribute(s,e[s]);return o}function k(t){var e,s,o=y[t];o&&(e=o.callback,(s=o.urls).shift(),i=0,s.length||(e&&e.call(o.context,o.obj),y[t]=null,_[t].length&&n(t)))}function n(t,e,s,o,i){function n(){k(t)}var c,a,r,l,h,d,f,u="css"===t,m=[];if(g||(f=navigator.userAgent,((g={async:!0===p.createElement("script").async}).webkit=/AppleWebKit\//.test(f))||(g.ie=/MSIE/.test(f))||(g.opera=/Opera/.test(f))||(g.gecko=/Gecko\//.test(f))||(g.unknown=!0)),e)if(e="string"==typeof e?[e]:e.concat(),u||g.async||g.gecko||g.opera)_[t].push({urls:e,callback:s,obj:o,context:i});else for(c=0,a=e.length;c<a;++c)_[t].push({urls:[e[c]],callback:c===a-1?s:null,obj:o,context:i});if(!y[t]&&(l=y[t]=_[t].shift())){for(b=b||(p.head||p.getElementsByTagName("head")[0]),c=0,a=(h=l.urls).length;c<a;++c)d=h[c],u?r=g.gecko?j("style"):j("link",{href:d,rel:"stylesheet"}):(r=j("script",{src:d})).async=!1,r.className="lazyload",r.setAttribute("charset","utf-8"),g.ie&&!u?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&(r.onreadystatechange=null,n())}:u&&(g.gecko||g.webkit)?g.webkit?(l.urls[c]=r.href,v()):(r.innerHTML='@import "'+d+'";',w(r)):r.onload=r.onerror=n,m.push(r);for(c=0,a=m.length;c<a;++c)b.appendChild(m[c])}}function w(e){var s;try{s=!!e.sheet.cssRules}catch(t){return void((i+=1)<200?setTimeout(function(){w(e)},50):s&&k("css"))}k("css")}function v(){var t,e=y.css;if(e){for(t=s.length;0<=--t;)if(s[t].href===e.urls[0]){k("css");break}i+=1,e&&(i<200?setTimeout(v,50):k("css"))}}return{css:function(t,e,s,o){n("css",t,e,s,o)},js:function(t,e,s,o){n("js",t,e,s,o)}}}(this.document),LoadLib=function(){var o=[];function i(t){for(var e=0,s=!1,e=0;e<o.length;e++)o[e]==t&&(s=!0);return s||void o.push(t)}return{css:function(t,e,s,o){i(t)||LazyLoad.css(t,e,s,o)},js:function(t,e,s,o){i(t)||LazyLoad.js(t,e,s,o)}}}(this.document),void 0===embed_path&&(_tmp_script_path=getEmbedScriptPath("timeline-embed.js"),embed_path=_tmp_script_path.substr(0,_tmp_script_path.lastIndexOf("js/"))),"object"==typeof url_config?createStoryJS(url_config):"object"==typeof timeline_config?createStoryJS(timeline_config):"object"==typeof storyjs_config?createStoryJS(storyjs_config):"object"==typeof config&&createStoryJS(config);